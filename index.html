
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Jayden's Closet Swipe</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background-color: #f5f6fa;
      color: #333;
    }
    header {
      background: linear-gradient(90deg, #4e54c8, #8f94fb);
      color: white;
      padding: 1rem;
      text-align: center;
      font-size: 1.5rem;
      font-weight: bold;
    }
    .tabs {
      display: flex;
      justify-content: space-around;
      background: white;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .tab {
      flex: 1;
      padding: 1rem;
      text-align: center;
      cursor: pointer;
    }
    .tab.active {
      border-bottom: 3px solid #4e54c8;
      font-weight: bold;
    }
    .section {
      display: none;
      padding: 1rem;
    }
    .section.active {
      display: block;
    }
    input, select, button {
      width: 100%;
      padding: 0.75rem;
      font-size: 1rem;
      margin: 0.5rem 0;
      border-radius: 8px;
      border: 1px solid #ccc;
    }
    button {
      background: #4e54c8;
      color: white;
      border: none;
      cursor: pointer;
    }
    .outfit-display {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.75rem 0;
    }
    .outfit-display img {
      max-height: 120px;
      margin: 0 10px;
    }
    .arrow {
      font-size: 2rem;
      cursor: pointer;
    }
    .weather-box {
      padding: 0.5rem;
      background: #e8eaf6;
      border-radius: 8px;
      margin-top: 1rem;
      font-size: 0.9rem;
    }
  </style>
</head>
<body>
  <header>Jayden's Closet Swipe</header>

  <div class="tabs">
    <div class="tab active" onclick="switchTab('closet')">👕 Closet</div>
    <div class="tab" onclick="switchTab('builder')">🎯 Outfit Builder</div>
    <div class="tab" onclick="switchTab('stylist')">🤖 AI Stylist</div>
  </div>

  <div id="closet" class="section active">
    <h2>Add to Closet</h2>
    <input type="file" id="imageUpload" accept="image/*">
    <input type="text" id="labelInput" placeholder="e.g. black hoodie">
    <select id="typeInput">
      <option value="top">Top</option>
      <option value="bottom">Bottom</option>
      <option value="shoes">Shoes</option>
      <option value="hat">Hat</option>
      <option value="socks">Socks</option>
      <option value="accessory">Watch/Bracelet</option>
    </select>
    <button onclick="addClothing()">Add to Closet</button>

    <h3>Your Closet</h3>
    <div id="closetList"></div>
  </div>

  <div id="builder" class="section">
    <h2>Swipe Outfit Builder</h2>
    <div class="outfit-display">
      <span class="arrow" onclick="scrollItem('top', -1)">⟨</span>
      <img id="topImage" src="" alt="Top">
      <span class="arrow" onclick="scrollItem('top', 1)">⟩</span>
    </div>
    <div class="outfit-display">
      <span class="arrow" onclick="scrollItem('bottom', -1)">⟨</span>
      <img id="bottomImage" src="" alt="Bottom">
      <span class="arrow" onclick="scrollItem('bottom', 1)">⟩</span>
    </div>
    <div class="outfit-display">
      <span class="arrow" onclick="scrollItem('shoes', -1)">⟨</span>
      <img id="shoesImage" src="" alt="Shoes">
      <span class="arrow" onclick="scrollItem('shoes', 1)">⟩</span>
    </div>
  </div>

  <div id="stylist" class="section">
    <h2>AI Stylist</h2>
    <input id="cityInput" placeholder="Enter your city (e.g. Calgary)">
    <button onclick="getWeather()">Check Weather</button>
    <div id="weatherInfo" class="weather-box"></div>
    <input id="aiPrompt" placeholder="What's the vibe? (e.g. cozy fit, rainy day)">
    <button onclick="generateOutfitFromPrompt()">Get Styled</button>
  </div>

  <script>
    const closet = JSON.parse(localStorage.getItem('closet')) || [];
    const currentIndex = { top: 0, bottom: 0, shoes: 0 };
    let weatherData = { temp: 20, condition: "Clear" }; // default placeholder

    function switchTab(tab) {
      document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
      document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
      document.querySelector('.tab[onclick*="' + tab + '"]').classList.add('active');
      document.getElementById(tab).classList.add('active');
    }

    function addClothing() {
      const file = document.getElementById('imageUpload').files[0];
      const label = document.getElementById('labelInput').value;
      const type = document.getElementById('typeInput').value;

      if (!file || !label) {
        alert("Add a label and image");
        return;
      }

      const reader = new FileReader();
      reader.onload = function (e) {
        closet.push({ label, type, src: e.target.result });
        localStorage.setItem('closet', JSON.stringify(closet));
        renderCloset();
      };
      reader.readAsDataURL(file);
    }

    function renderCloset() {
      const list = document.getElementById('closetList');
      list.innerHTML = '';
      closet.forEach(item => {
        const div = document.createElement('div');
        div.className = 'item-card';
        div.innerHTML = `<img src="${item.src}" alt="${item.label}"><p>${item.label}</p>`;
        list.appendChild(div);
      });
    }

    function scrollItem(type, direction) {
      const items = closet.filter(item => item.type === type);
      if (!items.length) return;

      currentIndex[type] = (currentIndex[type] + direction + items.length) % items.length;
      document.getElementById(type + 'Image').src = items[currentIndex[type]].src;
    }

    function getWeather() {
      const city = document.getElementById('cityInput').value;
      document.getElementById('weatherInfo').innerText = `Fetching weather for ${city}...`;

      // Placeholder: simulate weather
      setTimeout(() => {
        weatherData = {
          temp: Math.floor(Math.random() * 25) + 5,
          condition: ["Clear", "Rain", "Clouds"][Math.floor(Math.random() * 3)]
        };
        document.getElementById('weatherInfo').innerText =
          `🌡️ ${weatherData.temp}°C, ${weatherData.condition}`;
      }, 1000);
    }

    function generateOutfitFromPrompt() {
      const prompt = document.getElementById('aiPrompt').value.toLowerCase();
      const temp = weatherData.temp;
      const rain = weatherData.condition === "Rain";

      const top = closet.find(item => item.type === "top" && (prompt.includes("cozy") || temp < 15)) || closet.find(item => item.type === "top");
      const bottom = closet.find(item => item.type === "bottom") || closet.find(item => item.type === "bottom");
      const shoes = closet.find(item => item.type === "shoes" && (rain || prompt.includes("boots"))) || closet.find(item => item.type === "shoes");

      if (top) document.getElementById("topImage").src = top.src;
      if (bottom) document.getElementById("bottomImage").src = bottom.src;
      if (shoes) document.getElementById("shoesImage").src = shoes.src;
    }

    renderCloset();
    scrollItem('top', 0);
    scrollItem('bottom', 0);
    scrollItem('shoes', 0);
  </script>
</body>
</html>
